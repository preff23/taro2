<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Таработ - PRO Подписка</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0A0B1A;
            --bg-secondary: #1A1B2E;
            --bg-tertiary: #2A2B3E;
            --accent-mystic: #6366F1;
            --accent-lunar: #8B5CF6;
            --accent-crystal: #06B6D4;
            --accent-gold: #F59E0B;
            --text-primary: #F8FAFC;
            --text-secondary: #CBD5E1;
            --text-tertiary: #94A3B8;
            --gradient-mystic: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);
            --gradient-lunar: linear-gradient(135deg, #8B5CF6 0%, #06B6D4 100%);
            --gradient-crystal: linear-gradient(135deg, #06B6D4 0%, #3B82F6 100%);
            --gradient-gold: linear-gradient(135deg, #F59E0B 0%, #EF4444 100%);
            --glow-mystic: 0 0 20px rgba(99, 102, 241, 0.3);
            --glow-lunar: 0 0 20px rgba(139, 92, 246, 0.3);
            --glow-crystal: 0 0 20px rgba(6, 182, 212, 0.3);
            --glow-gold: 0 0 20px rgba(245, 158, 11, 0.3);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding-bottom: env(safe-area-inset-bottom);
        }

        /* Modal overlay */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: var(--bg-secondary);
            border-radius: 24px;
            padding: 32px;
            max-width: 400px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .close-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .close-btn svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }

        /* Header */
        .modal-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .modal-icon {
            width: 80px;
            height: 80px;
            background: var(--gradient-mystic);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            box-shadow: var(--glow-mystic);
            position: relative;
        }

        .modal-icon::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: var(--gradient-lunar);
            opacity: 0.3;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.3; }
            100% { transform: scale(1.2); opacity: 0; }
        }

        .modal-icon svg {
            width: 40px;
            height: 40px;
            fill: white;
            z-index: 1;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 8px;
            background: var(--gradient-mystic);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.5;
        }

        /* Features list */
        .features-list {
            margin-bottom: 32px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .feature-item:last-child {
            border-bottom: none;
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-crystal);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            box-shadow: var(--glow-crystal);
        }

        .feature-icon svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        .feature-content {
            flex: 1;
        }

        .feature-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .feature-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Pricing plans */
        .pricing-plans {
            margin-bottom: 32px;
        }

        .pricing-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 16px;
            text-align: center;
        }

        .plan-card {
            background: var(--bg-tertiary);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .plan-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .plan-card.recommended {
            border-color: var(--accent-gold);
            box-shadow: var(--glow-gold);
        }

        .plan-card.recommended::before {
            content: 'Рекомендуется';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gradient-gold);
            color: white;
            font-size: 0.7rem;
            padding: 4px 12px;
            border-radius: 12px;
            font-weight: 600;
        }

        .plan-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .plan-name {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .plan-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--accent-mystic);
        }

        .plan-period {
            font-size: 0.8rem;
            color: var(--text-tertiary);
            margin-bottom: 8px;
        }

        .plan-features {
            list-style: none;
        }

        .plan-features li {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .plan-features li::before {
            content: '✓';
            color: var(--accent-crystal);
            font-weight: bold;
        }

        /* Action buttons */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .btn-primary {
            background: var(--gradient-mystic);
            border: none;
            border-radius: 16px;
            padding: 16px 24px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--glow-mystic);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid var(--accent-mystic);
            border-radius: 16px;
            padding: 14px 24px;
            color: var(--accent-mystic);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: var(--accent-mystic);
            color: white;
        }

        /* Stars info */
        .stars-info {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            text-align: center;
        }

        .stars-icon {
            width: 32px;
            height: 32px;
            background: var(--gradient-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 8px;
            box-shadow: var(--glow-gold);
        }

        .stars-icon svg {
            width: 16px;
            height: 16px;
            fill: white;
        }

        .stars-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .stars-balance {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--accent-gold);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .animate-fadeInUp {
            animation: fadeInUp 0.6s ease-out;
        }

        .animate-slideIn {
            animation: slideIn 0.4s ease-out;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .modal-content {
                padding: 24px;
                margin: 10px;
            }
            
            .modal-title {
                font-size: 1.5rem;
            }
            
            .feature-item {
                gap: 12px;
            }
            
            .feature-icon {
                width: 32px;
                height: 32px;
            }
            
            .feature-icon svg {
                width: 16px;
                height: 16px;
            }
        }
    </style>
</head>
<body>
    <!-- Modal overlay -->
    <div class="modal-overlay animate-slideIn">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal()">
                <svg viewBox="0 0 24 24">
                    <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/>
                </svg>
            </button>

            <!-- Header -->
            <div class="modal-header animate-fadeInUp">
                <div class="modal-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z"/>
                    </svg>
                </div>
                <h1 class="modal-title">PRO Подписка</h1>
                <p class="modal-subtitle">Откройте все возможности мистических раскладов с ИИ-толкованиями</p>
            </div>

            <!-- Stars balance -->
            <div class="stars-info animate-fadeInUp">
                <div class="stars-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z"/>
                    </svg>
                </div>
                <p class="stars-text">Ваш баланс Stars</p>
                <p class="stars-balance">150 ⭐</p>
            </div>

            <!-- Features list -->
            <div class="features-list animate-fadeInUp">
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 14C13.66 14 15 12.66 15 11V5C15 3.34 13.66 2 12 2C10.34 2 9 3.34 9 5V11C9 12.66 10.34 14 12 14ZM19.1 11C19.1 7.93 16.97 5.4 14 5.04V7C16.24 7.4 17.9 9.02 17.9 11H19.1ZM14 17H10V15H14V17ZM12 20C8.69 20 6 17.31 6 14H8C8 16.21 9.79 18 12 18C14.21 18 16 16.21 16 14H18C18 17.31 15.31 20 12 20Z"/>
                        </svg>
                    </div>
                    <div class="feature-content">
                        <h3 class="feature-title">Голосовые вопросы</h3>
                        <p class="feature-description">Задавайте вопросы голосом и получайте персональные расклады</p>
                    </div>
                </div>

                <div class="feature-item">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M4 6H2V20C2 21.1 2.9 22 4 22H18V20H4V6ZM20 2H8C6.9 2 6 2.9 6 4V16C6 17.1 6.9 18 8 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H8V4H20V16ZM12 6H14V8H12V6ZM12 10H14V12H12V10ZM12 14H16V16H12V14Z"/>
                        </svg>
                    </div>
                    <div class="feature-content">
                        <h3 class="feature-title">Фото-расклады</h3>
                        <p class="feature-description">Загружайте фото и получайте расклады на основе изображения</p>
                    </div>
                </div>

                <div class="feature-item">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z"/>
                        </svg>
                    </div>
                    <div class="feature-content">
                        <h3 class="feature-title">Подробные толкования</h3>
                        <p class="feature-description">Расширенные ИИ-анализы с советами и прогнозами</p>
                    </div>
                </div>

                <div class="feature-item">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M16 6L18.29 8.29L13.41 13.17L9.41 9.17L2 16.59L3.41 18L9.41 12L13.41 16L19.71 9.71L22 12V6H16Z"/>
                        </svg>
                    </div>
                    <div class="feature-content">
                        <h3 class="feature-title">Аналитика и статистика</h3>
                        <p class="feature-description">Отслеживайте тенденции и изменения в ваших раскладах</p>
                    </div>
                </div>

                <div class="feature-item">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24">
                            <path d="M20 6H17.82C17.93 5.71 18 5.36 18 5C18 3.34 16.66 2 15 2C13.95 2 13.04 2.54 12.5 3.35L12 4.02L11.5 3.34C10.96 2.54 10.05 2 9 2C7.34 2 6 3.34 6 5C6 5.36 6.07 5.71 6.18 6H4C2.9 6 2 6.9 2 8V19C2 20.1 2.9 21 4 21H20C21.1 21 22 20.1 22 19V8C22 6.9 21.1 6 20 6ZM15 4C15.55 4 16 4.45 16 5S15.55 6 15 6 14 5.55 14 5 14.45 4 15 4ZM9 4C9.55 4 10 4.45 10 5S9.55 6 9 6 8 5.55 8 5 8.45 4 9 4ZM20 19H4V8H20V19Z"/>
                        </svg>
                    </div>
                    <div class="feature-content">
                        <h3 class="feature-title">Подарочные расклады</h3>
                        <p class="feature-description">Дарите расклады друзьям и близким</p>
                    </div>
                </div>
            </div>

            <!-- Pricing plans -->
            <div class="pricing-plans animate-fadeInUp">
                <h2 class="pricing-title">Выберите план</h2>
                
                <div class="plan-card recommended" onclick="selectPlan('monthly')">
                    <div class="plan-header">
                        <h3 class="plan-name">PRO Месяц</h3>
                        <span class="plan-price">150 ⭐</span>
                    </div>
                    <p class="plan-period">На 30 дней</p>
                    <ul class="plan-features">
                        <li>Неограниченные расклады</li>
                        <li>Голосовые вопросы</li>
                        <li>Фото-расклады</li>
                        <li>Подробные толкования</li>
                        <li>Аналитика</li>
                    </ul>
                </div>

                <div class="plan-card" onclick="selectPlan('yearly')">
                    <div class="plan-header">
                        <h3 class="plan-name">PRO Год</h3>
                        <span class="plan-price">1200 ⭐</span>
                    </div>
                    <p class="plan-period">На 365 дней (экономия 20%)</p>
                    <ul class="plan-features">
                        <li>Все функции PRO Месяц</li>
                        <li>Приоритетная поддержка</li>
                        <li>Эксклюзивные темы</li>
                        <li>Персональный астролог</li>
                        <li>Безлимитные подарки</li>
                    </ul>
                </div>
            </div>

            <!-- Action buttons -->
            <div class="action-buttons animate-fadeInUp">
                <button class="btn-primary" onclick="purchasePlan()">
                    Получить PRO за Stars
                </button>
                <button class="btn-secondary" onclick="closeModal()">
                    Позже
                </button>
            </div>
        </div>
    </div>

    <script>
        // Инициализация Telegram WebApp
        const initTelegram = () => {
            if (window.Telegram && window.Telegram.WebApp) {
                Telegram.WebApp.ready();
                Telegram.WebApp.expand();
                
                // Установка цветов темы
                const theme = Telegram.WebApp.colorScheme;
                if (theme === 'dark') {
                    Telegram.WebApp.setHeaderColor('#1A1B2E');
                    Telegram.WebApp.setBackgroundColor('#0A0B1A');
                } else {
                    Telegram.WebApp.setHeaderColor('#F8FAFC');
                    Telegram.WebApp.setBackgroundColor('#FFFFFF');
                }
            }
        };

        // Функции модального окна
        const closeModal = () => {
            console.log('Закрытие модального окна...');
            // В реальном приложении здесь будет закрытие модального окна
            // document.querySelector('.modal-overlay').style.display = 'none';
        };

        const selectPlan = (planType) => {
            console.log('Выбран план:', planType);
            // Выделение выбранного плана
            document.querySelectorAll('.plan-card').forEach(card => {
                card.style.borderColor = 'rgba(255, 255, 255, 0.1)';
            });
            event.currentTarget.style.borderColor = 'var(--accent-mystic)';
        };

        const purchasePlan = () => {
            console.log('Покупка PRO подписки...');
            
            // Проверка баланса Stars
            const starsBalance = 150; // Получаем из Telegram WebApp
            const selectedPlan = document.querySelector('.plan-card[style*="border-color: var(--accent-mystic)"]');
            
            if (!selectedPlan) {
                alert('Выберите план подписки');
                return;
            }
            
            // В реальном приложении здесь будет интеграция с Telegram Stars
            if (window.Telegram && window.Telegram.WebApp) {
                // Открытие платежного интерфейса Telegram Stars
                Telegram.WebApp.openInvoice({
                    title: 'PRO Подписка Таработ',
                    description: 'Получите доступ ко всем PRO функциям',
                    payload: 'pro_subscription',
                    provider_token: 'your_provider_token',
                    currency: 'XTR', // Telegram Stars
                    prices: [{ label: 'PRO Подписка', amount: '150' }]
                });
            }
        };

        // Обработка клика вне модального окна
        document.querySelector('.modal-overlay').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                closeModal();
            }
        });

        // Обработка клавиши Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Инициализация
        document.addEventListener('DOMContentLoaded', () => {
            initTelegram();
            
            // Анимация появления элементов
            const elements = document.querySelectorAll('.animate-fadeInUp');
            elements.forEach((el, index) => {
                el.style.animationDelay = `${index * 0.1}s`;
            });
        });

        // Обработка изменения темы
        if (window.Telegram && window.Telegram.WebApp) {
            Telegram.WebApp.onEvent('themeChanged', () => {
                const theme = Telegram.WebApp.colorScheme;
                document.documentElement.setAttribute('data-theme', theme);
            });
        }
    </script>
</body>
</html>
